---
layout: post
title:  "Dubbo教程"
date:   2021-05-07 21:14:25 +0800
categories: dubbo
---

## Dubbo-admin简介
Dubbo-admin是Dubbo RPC框架的“管理端”，可以对注册的服务（provider）和服务调用方（comsumer）进行服务治理，包括路由、监控、配置等功能；

Dubbo一般都是使用zookeeper来进行管理服务注册，而dubbo-admin查看哪些注册了哪些服务，也是需要从zk上查询的，所以Dubbo-admin需要依赖于zookeeper；

另外，Dubbo-admin是一个web项目（spring-boot），提供了管理端页面，页面是使用vue框架，所以需要安装node环境；

对于zookeeper和node的相关安装配置，这里就不在阐述。


## Dubbo-admin项目
github地址：https://github.com/apache/dubbo-admin

在项目目录下打包dubbo-admin
```bash
mvn clean package -Dmaven.test.skip=true
```
这是一个SpringBoot项目，也可以导入到IDEA中，双击Maven面板中的package按钮来进行构建。
构建之后的结果文件生成在：project-dir/dubbo-admin-distribution/target/dubbo-admin-0.3.0-SNAPSHOT.jar

## 运行
运行Dubbo-Admin前需要先启动ZooKeeper：
```bash
# 启动ZooKeeper
/Users/yiny/soft/apache-zookeeper-3.7.0-bin/bin/zkServer.sh start
```
这里需要注意的是，需要修改ZooKeeper使用的默认端口，否则在启动Dubbo-admin的时候会出现端口被占用的情况。修改方法为修改zoo.cfg，在最后添加：
```properties
admin.serverPort=38080
```
然后再次使用`lsof -i tcp:38080`来查看端口占用情况。


```bash
# 启动Dubbo-Admin
# java -jar dubbo-admin-0.0.1-SNAPSHOT.jar
/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/bin/java -jar /Users/yiny/Sites/dubbo-admin/dubbo-admin-distribution/target/dubbo-admin-0.3.0-SNAPSHOT.jar
```



然后使用浏览器访问：http://localhost:8080
用户名密码都是root/root
即可看到Dubbo-Admin界面了。

![](https://yinyang.space/img/20210807_dubbo.png)


## 使用Docker搭建Dubbo-Admin环境：
```bash
docker pull apache/dubbo-admin:latest
```



## 微服务两种架构方案的比较 
* Spring Boot + Spring Cloud   组件多，功能完备， Http通讯，俗称SpringCloud全家桶 ->微服务架构解决方案一

* Spring Boot+Dubbo+Zookeeper  组件少，功能非完备 Alibaba  Dubbo  ->RPC通讯框架 ->微服务架构解决方案二

微服务架构是一种思想，实现方案是分布式系统，分布式系统最大的问题 -> 网络是不可靠的。


## 什么是分布式锁
Zookeeper 分布式协调服务： 解决分布式系统当中多个进程之间的同步控制，让他们有序的访问某种临界资源，防止造成脏数据的后果。

为了防止分布式系统中的多个进程之间相互干扰，用分布式协调技术对这种进程进行调度，而分布式协调技术的核心就是分布式锁

**分布式锁：** 在分布式系统环境下，一个方法在同一时间只能被一个机器的一个线程执行。




## Dubbo-Admin + ZooKeeper 服务注册与发现配置

1. 新建dubbo-zk-api的Maven项目
```java
@Component
public interface TicketService {
    String getTicket();
}

@Component
public interface UserService {
    String sayHi();
}
```

2. 新建provider的SpringBoot服务项目，并导入依赖
```xml
<!-- 导入依赖 Dubbo + ZooKeeper -->
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
    <version>2.7.3</version>
</dependency>

<dependency>
    <groupId>com.github.sgroschupf</groupId>
    <artifactId>zkclient</artifactId>
    <version>0.1</version>
</dependency>

<dependency>
    <groupId>org.apache.curator</groupId>
    <artifactId>curator-framework</artifactId>
    <version>2.12.0</version>
</dependency>

<dependency>
    <groupId>org.apache.curator</groupId>
    <artifactId>curator-recipes</artifactId>
    <version>2.12.0</version>
</dependency>

<dependency>
    <groupId>org.apache.zookeeper</groupId>
    <artifactId>zookeeper</artifactId>
    <version>3.4.14</version>

    <!-- 排除这个slf4j-log4j12 -->
    <exclusions>
        <exclusion>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
        </exclusion>
    </exclusions>
</dependency>
<dependency>
    <groupId>cn.geekhall</groupId>
    <artifactId>dubbo-zk-api</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency>
```

properties配置：
```properties
# 端口
server.port=8001

# 服务应用名字
dubbo.application.name=dubbo-zk-provider

# 注册中心地址
dubbo.registry.address=zookeeper://127.0.0.1:2181

# 哪些服务要被注册
dubbo.scan.base-packages=cn.geekhall.service

dubbo.application.protocol=dubbo
```


新建服务接口实现
```java
package cn.geekhall.service;

import org.apache.dubbo.config.annotation.Service;
import org.springframework.stereotype.Component;

@Service    //这里的Service注解是Dubbo的，可以被扫描到，在项目一启动就自动注册到注册中心
@Component
public class TicketServiceImpl implements TicketService {
    @Override
    public String getTicket() {
        return "极客堂";
    }
}

@Service    
@Component  
public class UserServiceImpl implements UserService {
    @Override
    public String sayHi() {
        return "Hi geek!";
    }
}
```

启动服务后，在Dubbo-admin后台即可看到服务：
![](https://yinyang.space/img/20210808_zk_01.png)

3. 新建Consumer的SpringBoot服务项目，并导入依赖
```xml
<!-- 导入依赖 Dubbo + ZooKeeper -->
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
    <version>2.7.3</version>
</dependency>

<dependency>
    <groupId>com.github.sgroschupf</groupId>
    <artifactId>zkclient</artifactId>
    <version>0.1</version>
</dependency>

<dependency>
    <groupId>org.apache.curator</groupId>
    <artifactId>curator-framework</artifactId>
    <version>2.12.0</version>
</dependency>

<dependency>
    <groupId>org.apache.curator</groupId>
    <artifactId>curator-recipes</artifactId>
    <version>2.12.0</version>
</dependency>

<dependency>
    <groupId>org.apache.zookeeper</groupId>
    <artifactId>zookeeper</artifactId>
    <version>3.4.14</version>

    <!-- 排除这个slf4j-log4j12 -->
    <exclusions>
        <exclusion>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
        </exclusion>
    </exclusions>
</dependency>
<dependency>
    <groupId>cn.geekhall</groupId>
    <artifactId>dubbo-zk-api</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency>
```

application.properties配置：

```properties
# 服务端口
server.port=8002

# 消费者去哪里拿服务需要暴露自己的名字
dubbo.application.name=dubbo-zk-consumer

# 注册中心地址
dubbo.registry.address=zookeeper://127.0.0.1:2181
```



Customer代码：
```java
package cn.geekhall.service;

import org.apache.dubbo.config.annotation.Reference;
import org.springframework.stereotype.Service;

@Service   // 这里的Service是Spring的，放到容器中即可
public class UserService {

    // 想拿到provider提供的票，要去注册中心拿到服务
    @Reference(timeout = 30000)    // 引用 ， Pom坐标，可以定义路径相同的接口名
    TicketService ticketService;

    public void buyTicket(){
        String ticket = ticketService.getTicket();
        System.out.println("在注册中心拿到 ====> " + ticket);
    }
}
```

运行Consumer，得到运行结果：
```
2021-08-08 14:22:05.029  INFO 54035 --- [           main] c.g.DubboZkConsumerApplicationTests      : Starting DubboZkConsumerApplicationTests using Java 1.8.0_251 on MacBook-Pro with PID 54035 (started by yiny in /Users/yiny/Sites/java_demo/dubbo-zk-consumer)
2021-08-08 14:22:05.052  INFO 54035 --- [           main] c.g.DubboZkConsumerApplicationTests      : No active profile set, falling back to default profiles: default
2021-08-08 14:22:05.440  INFO 54035 --- [           main] .a.d.c.s.c.a.DubboConfigBindingRegistrar : The dubbo config bean definition [name : org.apache.dubbo.config.ApplicationConfig#0, class : org.apache.dubbo.config.ApplicationConfig] has been registered.
2021-08-08 14:22:05.441  INFO 54035 --- [           main] .a.d.c.s.c.a.DubboConfigBindingRegistrar : The BeanPostProcessor bean definition [org.apache.dubbo.config.spring.beans.factory.annotation.DubboConfigBindingBeanPostProcessor] for dubbo config bean [name : org.apache.dubbo.config.ApplicationConfig#0] has been registered.
2021-08-08 14:22:05.441  INFO 54035 --- [           main] .a.d.c.s.c.a.DubboConfigBindingRegistrar : The dubbo config bean definition [name : org.apache.dubbo.config.RegistryConfig#0, class : org.apache.dubbo.config.RegistryConfig] has been registered.
2021-08-08 14:22:05.441  INFO 54035 --- [           main] .a.d.c.s.c.a.DubboConfigBindingRegistrar : The BeanPostProcessor bean definition [org.apache.dubbo.config.spring.beans.factory.annotation.DubboConfigBindingBeanPostProcessor] for dubbo config bean [name : org.apache.dubbo.config.RegistryConfig#0] has been registered.
2021-08-08 14:22:05.622  INFO 54035 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.apache.dubbo.spring.boot.autoconfigure.DubboAutoConfiguration' of type [org.apache.dubbo.spring.boot.autoconfigure.DubboAutoConfiguration$$EnhancerBySpringCGLIB$$8b980fda] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-08-08 14:22:05.727  INFO 54035 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.apache.dubbo.spring.boot.autoconfigure.DubboRelaxedBinding2AutoConfiguration' of type [org.apache.dubbo.spring.boot.autoconfigure.DubboRelaxedBinding2AutoConfiguration$$EnhancerBySpringCGLIB$$1c5234aa] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-08-08 14:22:05.748  INFO 54035 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'relaxedDubboConfigBinder' of type [org.apache.dubbo.spring.boot.autoconfigure.BinderDubboConfigBinder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-08-08 14:22:05.763  INFO 54035 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'relaxedDubboConfigBinder' of type [org.apache.dubbo.spring.boot.autoconfigure.BinderDubboConfigBinder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-08-08 14:22:06.026  INFO 54035 --- [           main] .f.a.DubboConfigBindingBeanPostProcessor : The properties of bean [name : org.apache.dubbo.config.ApplicationConfig#0] have been binding by prefix of configuration properties : dubbo.application
2021-08-08 14:22:06.034  INFO 54035 --- [           main] .f.a.DubboConfigBindingBeanPostProcessor : The properties of bean [name : org.apache.dubbo.config.RegistryConfig#0] have been binding by prefix of configuration properties : dubbo.registry
2021-08-08 14:22:06.035  INFO 54035 --- [           main] o.a.d.c.s.b.f.a.ReferenceBeanBuilder     : The configBean[type:ReferenceBean] has been built.
2021-08-08 14:22:06.137  INFO 54035 --- [           main] o.a.c.f.imps.CuratorFrameworkImpl        : Starting
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:zookeeper.version=3.4.14-4c25d480e66aadd371de8bd2fd8da255ac140bcf, built on 03/06/2019 16:18 GMT
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:host.name=macbook-pro
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:java.version=1.8.0_251
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:java.vendor=Oracle Corporation
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:java.class.path=/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar:/Applications/IntelliJ IDEA.app/Contents/plugins/junit/lib/junit-rt.jar:/Applications/IntelliJ IDEA.app/Contents/plugins/junit/lib/junit5-rt.jar:/Users/yiny/.m2/repository/org/junit/platform/junit-platform-launcher/1.7.2/junit-platform-launcher-1.7.2.jar:/Users/yiny/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar:/Users/yiny/.m2/repository/org/junit/platform/junit-platform-engine/1.7.2/junit-platform-engine-1.7.2.jar:/Users/yiny/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar:/Users/yiny/.m2/repository/org/junit/platform/junit-platform-commons/1.7.2/junit-platform-commons-1.7.2.jar:/Users/yiny/.m2/repository/org/junit/vintage/junit-vintage-engine/5.7.2/junit-vintage-engine-5.7.2.jar:/Users/yiny/.m2/repository/junit/junit/4.13/junit-4.13.jar:/Users/yiny/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jfxswt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/lib/ant-javafx.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/lib/javafx-mx.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/lib/packager.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/lib/tools.jar:/Users/yiny/Sites/java_demo/dubbo-zk-consumer/target/test-classes:/Users/yiny/Sites/java_demo/dubbo-zk-consumer/target/classes:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-starter-web/2.5.3/spring-boot-starter-web-2.5.3.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-starter/2.5.3/spring-boot-starter-2.5.3.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot/2.5.3/spring-boot-2.5.3.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/2.5.3/spring-boot-autoconfigure-2.5.3.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-starter-logging/2.5.3/spring-boot-starter-logging-2.5.3.jar:/Users/yiny/.m2/repository/ch/qos/logback/logback-classic/1.2.4/logback-classic-1.2.4.jar:/Users/yiny/.m2/repository/ch/qos/logback/logback-core/1.2.4/logback-core-1.2.4.jar:/Users/yiny/.m2/repository/org/apache/logging/log4j/log4j-to-slf4j/2.14.1/log4j-to-slf4j-2.14.1.jar:/Users/yiny/.m2/repository/org/apache/logging/log4j/log4j-api/2.14.1/log4j-api-2.14.1.jar:/Users/yiny/.m2/repository/org/slf4j/jul-to-slf4j/1.7.32/jul-to-slf4j-1.7.32.jar:/Users/yiny/.m2/repository/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar:/Users/yiny/.m2/repository/org/yaml/snakeyaml/1.28/snakeyaml-1.28.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-starter-json/2.5.3/spring-boot-starter-json-2.5.3.jar:/Users/yiny/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.12.4/jackson-databind-2.12.4.jar:/Users/yiny/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.12.4/jackson-annotations-2.12.4.jar:/Users/yiny/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.12.4/jackson-core-2.12.4.jar:/Users/yiny/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jdk8/2.12.4/jackson-datatype-jdk8-2.12.4.jar:/Users/yiny/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.12.4/jackson-datatype-jsr310-2.12.4.jar:/Users/yiny/.m2/repository/com/fasterxml/jackson/module/jackson-module-parameter-names/2.12.4/jackson-module-parameter-names-2.12.4.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-starter-tomcat/2.5.3/spring-boot-starter-tomcat-2.5.3.jar:/Users/yiny/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/9.0.50/tomcat-embed-core-9.0.50.jar:/Users/yiny/.m2/repository/org/apache/tomcat/embed/tomcat-embed-el/9.0.50/tomcat-embed-el-9.0.50.jar:/Users/yiny/.m2/repository/org/apache/tomcat/embed/tomcat-embed-websocket/9.0.50/tomcat-embed-websocket-9.0.50.jar:/Users/yiny/.m2/repository/org/springframework/spring-web/5.3.9/spring-web-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/spring-beans/5.3.9/spring-beans-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/spring-webmvc/5.3.9/spring-webmvc-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/spring-aop/5.3.9/spring-aop-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/spring-context/5.3.9/spring-context-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/spring-expression/5.3.9/spring-expression-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-starter-test/2.5.3/spring-boot-starter-test-2.5.3.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-test/2.5.3/spring-boot-test-2.5.3.jar:/Users/yiny/.m2/repository/org/springframework/boot/spring-boot-test-autoconfigure/2.5.3/spring-boot-test-autoconfigure-2.5.3.jar:/Users/yiny/.m2/repository/com/jayway/jsonpath/json-path/2.5.0/json-path-2.5.0.jar:/Users/yiny/.m2/repository/net/minidev/json-smart/2.4.7/json-smart-2.4.7.jar:/Users/yiny/.m2/repository/net/minidev/accessors-smart/2.4.7/accessors-smart-2.4.7.jar:/Users/yiny/.m2/repository/org/ow2/asm/asm/9.1/asm-9.1.jar:/Users/yiny/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/Users/yiny/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/Users/yiny/.m2/repository/org/assertj/assertj-core/3.19.0/assertj-core-3.19.0.jar:/Users/yiny/.m2/repository/org/hamcrest/hamcrest/2.2/hamcrest-2.2.jar:/Users/yiny/.m2/repository/org/junit/jupiter/junit-jupiter/5.7.2/junit-jupiter-5.7.2.jar:/Users/yiny/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.7.2/junit-jupiter-api-5.7.2.jar:/Users/yiny/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.7.2/junit-jupiter-params-5.7.2.jar:/Users/yiny/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.7.2/junit-jupiter-engine-5.7.2.jar:/Users/yiny/.m2/repository/org/mockito/mockito-core/3.9.0/mockito-core-3.9.0.jar:/Users/yiny/.m2/repository/net/bytebuddy/byte-buddy/1.10.22/byte-buddy-1.10.22.jar:/Users/yiny/.m2/repository/net/bytebuddy/byte-buddy-agent/1.10.22/byte-buddy-agent-1.10.22.jar:/Users/yiny/.m2/repository/org/objenesis/objenesis/3.2/objenesis-3.2.jar:/Users/yiny/.m2/repository/org/mockito/mockito-junit-jupiter/3.9.0/mockito-junit-jupiter-3.9.0.jar:/Users/yiny/.m2/repository/org/skyscreamer/jsonassert/1.5.0/jsonassert-1.5.0.jar:/Users/yiny/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar:/Users/yiny/.m2/repository/org/springframework/spring-core/5.3.9/spring-core-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/spring-jcl/5.3.9/spring-jcl-5.3.9.jar:/Users/yiny/.m2/repository/org/springframework/spring-test/5.3.9/spring-test-5.3.9.jar:/Users/yiny/.m2/repository/org/xmlunit/xmlunit-core/2.8.2/xmlunit-core-2.8.2.jar:/Users/yiny/.m2/repository/org/apache/dubbo/dubbo-spring-boot-starter/2.7.3/dubbo-spring-boot-starter-2.7.3.jar:/Users/yiny/.m2/repository/org/apache/dubbo/dubbo-spring-boot-autoconfigure/2.7.3/dubbo-spring-boot-autoconfigure-2.7.3.jar:/Users/yiny/.m2/repository/org/apache/dubbo/dubbo-spring-boot-autoconfigure-compatible/2.7.3/dubbo-spring-boot-autoconfigure-compatible-2.7.3.jar:/Users/yiny/.m2/repository/org/apache/dubbo/dubbo/2.7.3/dubbo-2.7.3.jar:/Users/yiny/.m2/repository/org/javassist/javassist/3.20.0-GA/javassist-3.20.0-GA.jar:/Users/yiny/.m2/repository/io/netty/netty-all/4.1.66.Final/netty-all-4.1.66.Final.jar:/Users/yiny/.m2/repository/com/google/code/gson/gson/2.8.7/gson-2.8.7.jar:/Users/yiny/.m2/repository/com/github/sgroschupf/zkclient/0.1/zkclient-0.1.jar:/Users/yiny/.m2/repository/log4j/log4j/1.2.14/log4j-1.2.14.jar:/Users/yiny/.m2/repository/org/apache/curator/curator-framework/2.12.0/curator-framework-2.12.0.jar:/Users/yiny/.m2/repository/org/apache/curator/curator-client/2.12.0/curator-client-2.12.0.jar:/Users/yiny/.m2/repository/com/google/guava/guava/16.0.1/guava-16.0.1.jar:/Users/yiny/.m2/repository/org/apache/curator/curator-recipes/2.12.0/curator-recipes-2.12.0.jar:/Users/yiny/.m2/repository/org/apache/zookeeper/zookeeper/3.4.14/zookeeper-3.4.14.jar:/Users/yiny/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/yiny/.m2/repository/com/github/spotbugs/spotbugs-annotations/3.1.9/spotbugs-annotations-3.1.9.jar:/Users/yiny/.m2/repository/com/google/code/findbugs/jsr305/3.0.2/jsr305-3.0.2.jar:/Users/yiny/.m2/repository/jline/jline/0.9.94/jline-0.9.94.jar:/Users/yiny/.m2/repository/org/apache/yetus/audience-annotations/0.5.0/audience-annotations-0.5.0.jar:/Users/yiny/.m2/repository/io/netty/netty/3.10.6.Final/netty-3.10.6.Final.jar:/Users/yiny/Sites/java_demo/dubbo-zk-api/target/classes:/Users/yiny/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar:/Users/yiny/.m2/repository/org/hamcrest/hamcrest-core/2.2/hamcrest-core-2.2.jar:/Users/yiny/.m2/repository/javax/servlet/javax.servlet-api/4.0.1/javax.servlet-api-4.0.1.jar:/Users/yiny/.m2/repository/javax/servlet/jsp/javax.servlet.jsp-api/2.3.3/javax.servlet.jsp-api-2.3.3.jar:/Users/yiny/.m2/repository/jstl/jstl/1.2/jstl-1.2.jar:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:java.library.path=/Users/yiny/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:java.io.tmpdir=/var/folders/7p/r7xrt8r50l1cd6dh0dtz2n940000gp/T/
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:java.compiler=<NA>
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:os.name=Mac OS X
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:os.arch=x86_64
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:os.version=10.16
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:user.name=yiny
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:user.home=/Users/yiny
2021-08-08 14:22:06.156  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Client environment:user.dir=/Users/yiny/Sites/java_demo/dubbo-zk-consumer
2021-08-08 14:22:06.157  INFO 54035 --- [           main] org.apache.zookeeper.ZooKeeper           : Initiating client connection, connectString=127.0.0.1:2181 sessionTimeout=60000 watcher=org.apache.curator.ConnectionState@252f626c
2021-08-08 14:22:06.175  INFO 54035 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn          : Opening socket connection to server localhost/127.0.0.1:2181. Will not attempt to authenticate using SASL (unknown error)
2021-08-08 14:22:06.192  INFO 54035 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn          : Socket connection established to localhost/127.0.0.1:2181, initiating session
2021-08-08 14:22:06.217  INFO 54035 --- [localhost:2181)] org.apache.zookeeper.ClientCnxn          : Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x1000146c20c0007, negotiated timeout = 40000
2021-08-08 14:22:06.221  INFO 54035 --- [ain-EventThread] o.a.c.f.state.ConnectionStateManager     : State change: CONNECTED
2021-08-08 14:22:07.663  INFO 54035 --- [           main] c.g.DubboZkConsumerApplicationTests      : Started DubboZkConsumerApplicationTests in 2.957 seconds (JVM running for 3.913)
在注册中心拿到 ====> 极客堂-941311334
2021-08-08 14:22:08.094  INFO 54035 --- [extShutdownHook] .b.c.e.AwaitingNonWebApplicationListener :  [Dubbo] Current Spring Boot Application is about to shutdown...
2021-08-08 14:22:08.129  INFO 54035 --- [tor-Framework-0] o.a.c.f.imps.CuratorFrameworkImpl        : backgroundOperationsLoop exiting
2021-08-08 14:22:08.151  INFO 54035 --- [ain-EventThread] org.apache.zookeeper.ClientCnxn          : EventThread shut down for session: 0x1000146c20c0007
2021-08-08 14:22:08.151  INFO 54035 --- [extShutdownHook] org.apache.zookeeper.ZooKeeper           : Session: 0x1000146c20c0007 closed
2021-08-08 14:22:08.159  INFO 54035 --- [extShutdownHook] f.a.ReferenceAnnotationBeanPostProcessor : org.apache.dubbo.common.bytecode.proxy0@a69919e was destroying!
2021-08-08 14:22:08.159  INFO 54035 --- [extShutdownHook] f.a.ReferenceAnnotationBeanPostProcessor : class org.apache.dubbo.config.spring.beans.factory.annotation.ReferenceAnnotationBeanPostProcessor was destroying!

Process finished with exit code 0
```
